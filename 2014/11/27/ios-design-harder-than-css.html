<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" />
    <meta content="width=device-width,initial-scale=1.0" name="viewport" />
    <title>CSS に慣れた人が iOS で見た目を少し変えたい時に少し面倒だった事例 × 2 - blog.tdksk.com</title><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" /><link href="/stylesheets/all.css" media="all" rel="stylesheet" type="text/css" /><!--[if lte IE 8]><script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script><![endif]-->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-21700911-7', 'tdksk.com');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <header class="header">
      <div class="container">
        <h1>
          <a href="/">blog.tdksk.com</a>
        </h1>
        <h2>
          design / tech
        </h2>
      </div>
    </header>
    <main class="main">
      <div class="container"><article class="article">
  <h1 class="article-title">
    CSS に慣れた人が iOS で見た目を少し変えたい時に少し面倒だった事例 × 2
  </h1>
  <p class="article-date">
    2014-11-27
  </p><p>CSS だと1行で簡単にできるから iOS でも簡単にできるんだろうな〜 Interface Builder もあるしな〜とか思ってると意外とそう簡単にはいかないということがあったので、せっかくのまだ iOS 開発に触れて間もないフレッシュな時期に書き残しておこうと思います。</p>

<h2 id="toc_0">複数行ラベルの行間を変更したい</h2>

<p><img src="https://cloud.githubusercontent.com/assets/2177378/5217680/0e16a4ee-7687-11e4-8b1c-afd60e94f584.png" /></p>

<h3 id="toc_1">CSS なら</h3>
<pre class="highlight css"><span class="nt">line-height</span><span class="o">:</span> <span class="nt">1</span><span class="nc">.5</span><span class="o">;</span>
</pre>
<h3 id="toc_2">iOS の場合</h3>

<p>numberOfLines が適当に指定されていて、<code>text</code> プロパティにコード上で値を代入しているような <code>label: UILabel</code> があるとして、</p>

<h4 id="toc_3">Objective-C</h4>
<pre class="highlight text">CGFloat lineHeightMultiple = 1.5;

NSMutableAttributedString *attributedString = [label.attributedText mutableCopy];

NSMutableParagraphStyle *paragrahStyle = [NSMutableParagraphStyle new];
paragrahStyle.lineHeightMultiple = lineHeightMultiple;

[attributedString addAttribute:NSParagraphStyleAttributeName
                         value:paragrahStyle
                         range:NSMakeRange(0, attributedString.length)];

[label setAttributedText:attributedString];
</pre>
<h4 id="toc_4">Swift</h4>
<pre class="highlight text">let lineHeightMultiple: CGFloat = 1.5

let attributedString = label.attributedText.mutableCopy() as NSMutableAttributedString

let paragraphStyle = NSMutableParagraphStyle()
paragraphStyle.lineHeightMultiple = lineHeightMultiple;

attributedString.addAttribute(
    NSParagraphStyleAttributeName,
    value: paragraphStyle,
    range: NSMakeRange(0, attributedString.length))

label.attributedText = attributedString
</pre>
<h4 id="toc_5">長いので UILabel のカテゴリを作った</h4>

<p><a href="https://gist.github.com/tdksk/d547fa69820bc4b7860a">https://gist.github.com/tdksk/d547fa69820bc4b7860a</a></p>
<pre class="highlight text">[label setLineHeightMultiple:1.5];
</pre>
<p>みたいな感じでいけます。</p>

<h2 id="toc_6">全部じゃなくて一部角丸にしたい</h2>

<p><img src="https://cloud.githubusercontent.com/assets/2177378/5217679/0e10ef04-7687-11e4-88eb-9e165bbf5710.png" /></p>

<h3 id="toc_7">CSS なら</h3>
<pre class="highlight css"><span class="nt">border-radius</span><span class="o">:</span> <span class="nt">4px</span> <span class="nt">4px</span> <span class="nt">0</span> <span class="nt">0</span><span class="o">;</span>
</pre>
<h3 id="toc_8">iOS の場合</h3>

<p><code>view: UIView</code> を角丸にしたいとき、全て角丸なら <code>view.layer.cornerRadius = 4.0</code> とかで簡単にできるのですが、一部角丸にしたい場合は1行ではいかなくて、</p>

<h4 id="toc_9">Objective-C</h4>
<pre class="highlight text">CGFloat cornerRadius = 4.0;
UIRectCorner corners = UIRectCornerTopLeft | UIRectCornerTopRight

[view layoutIfNeeded];

UIBezierPath *maskPath;
maskPath = [UIBezierPath bezierPathWithRoundedRect:view.bounds
                                 byRoundingCorners:corners
                                       cornerRadii:CGSizeMake(cornerRadius, cornerRadius)];

CAShapeLayer *maskLayer = [CAShapeLayer new];
maskLayer.frame = view.bounds;
maskLayer.path = maskPath.CGPath;

view.layer.mask = maskLayer;
</pre>
<h4 id="toc_10">Swift</h4>
<pre class="highlight text">let cornerRadius: CGFloat = 4.0
let corners = UIRectCorner.TopLeft | UIRectCorner.TopRight

view.layoutIfNeeded()

let maskPath = UIBezierPath(
    roundedRect: view.bounds,
    byRoundingCorners: corners,
    cornerRadii: CGSizeMake(cornerRadius, cornerRadius))

let maskLayer = CAShapeLayer()
maskLayer.frame = view.bounds
maskLayer.path = maskPath.CGPath

view.layer.mask = maskLayer
</pre>
<h4 id="toc_11">長いので UIView のカテゴリを作った</h4>

<p><a href="https://gist.github.com/tdksk/21f6b821011398cc74f8">https://gist.github.com/tdksk/21f6b821011398cc74f8</a></p>
<pre class="highlight text">[view maskByRoundingCorners:(UIRectCornerTopLeft | UIRectCornerTopRight)
               cornerRadius:4.0];
</pre>
<p>場所毎に角丸の大きさ変えたいケースが今までほぼなかったので大きさは固定です。</p>

<h2 id="toc_12">所感</h2>

<p>View まわりのコード書くとき Swift だと速く書けるので Swift 好きです。</p>

<p>Swift で遊んでみたときのコードは <a href="https://gist.github.com/tdksk/22ab94687e4a8103edc2">こちら</a> 。</p>

</article>
      </div>
    </main>
    <footer class="footer">
      <div class="container">
        <p>
          &copy; 2015 <a href="http://tdksk.com/">Keisuke Tada</a>
        </p>
      </div>
    </footer>
  </body>
</html>